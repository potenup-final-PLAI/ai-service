
---

# AI 파트 PRD (Product Requirements Document)  
**프로젝트명: Loreless – AI 융합 턴제 전략 RPG**

---

## 1. 문서 목적

이 문서는 Loreless 프로젝트의 AI 시스템이 제공해야 할 기능과 기술적 요구사항을 정의하여,  
게임 클라이언트 및 서버와의 연동 개발 과정에서 역할을 명확히 하고, 구현 범위를 통일하기 위한 기준 문서이다.

---

## 2. 프로젝트 개요

- **게임 장르**: 턴제 전략 RPG  
- **게임 구조**: 플레이어는 기억을 잃은 상태로 게임을 시작하며, 대화를 통해 캐릭터의 배경을 재구성하고, 몬스터는 전투 상황에 따라 AI 기반으로 행동한다. NPC와의 상호작용은 스토리 확장 및 몰입 요소로 활용된다.  
- **아키텍처 구조**: 클라이언트-주도(Client-Authority) / 서버-보조(Server-Assisted) 구조  
  - 클라이언트가 게임 로직과 상태를 직접 처리하고  
  - 서버는 AI 호출 및 결과 전달, 게임 로그 저장을 수행한다.

---

## 3. AI 시스템 주요 기능

### 1. 플레이어 캐릭터 설정

- 게임 초반, 플레이어는 기억을 잃은 상태로 시작하며  
  NPC와 나누는 자연스러운 대화를 기반으로  
  AI가 다음 정보를 종합해 생성한다:
  - 종족, 직업, 성격 태그
  - 스탯 분배 (STR, DEX 등)
  - 초기 스킬 목록  
- 이후 캐릭터 생성은 서버에서 응답된 값을 클라이언트가 적용한다.

### 2. 전투 시스템

- 전투 중 몬스터의 현재 상태, 플레이어의 상태, 턴 정보 등을 종합하여  
  AI가 몬스터의 다음 행동을 결정한다.
- 결과는 JSON 형식으로 반환되며, 클라이언트에서 직접 액션을 실행한다.
- 행동 판단의 이유(reason)는 로그 및 디버깅용으로 함께 전달된다.

### 3. NPC 대화 응답 생성

- 플레이어의 자연어 입력에 따라  
  사전 설정된 NPC의 배경, 성격, 지식 범위를 반영하여  
  AI가 자연스러운 대사 응답을 생성한다.
- 모든 NPC 응답은 클라이언트에 반환되어 UI 상에서 출력된다.

---

## 4. 기술 스택 및 구성

| 구성 요소         | 기술 |
|------------------|------|
| 언어 및 서버       | Python 3.11, FastAPI |
| 통신 방식         | RESTful API (HTTP/JSON) |
| AI 모델           | 외부 API 기반 모델 (Google Gemini) |
| 데이터 저장        | PostgreSQL (게임 로그 저장, 캐릭터 설정 기록 등) |
| 배포 환경         | 로컬 개발 서버 (테스트 및 클라이언트 연동 목적) |
| 클라이언트 연동    | Unreal Engine, HTTP 요청 기반 연동 (예: 몬스터 행동, 캐릭터 정보 적용 등) |

---

## 5. AI 서버의 역할 및 연동 방식

- 클라이언트가 요청 정보를 수집 및 전송
- AI 서버는 프롬프트 구성 후 외부 모델 호출
- 결과를 파싱하여 JSON 응답으로 반환
- 클라이언트는 응답 결과를 즉시 반영하고, 로그는 서버에 저장

---

## 6. 고려 사항

- 모든 상태 결정 권한은 클라이언트에 있으며, 서버는 상태 저장과 판단 결과 보조에 집중한다.
- AI 응답 속도는 실시간 전투/캐릭터 설정에 방해되지 않는 수준(1초 이내)을 목표로 한다.
- 반복된 요청에 대한 응답 캐싱 또는 상태 해시 기반 무효화 처리 등은 추후 적용 가능하다.
- 프롬프트 응답 포맷은 일관성을 유지하여 클라이언트에서 파싱이 쉬워야 한다.

---
